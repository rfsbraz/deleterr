{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Deleterr","text":"<p>Automated media library management for Plex using Radarr, Sonarr, and Tautulli.</p> <p>Deleterr identifies and deletes media files based on user-specified criteria. Setup Deleterr to run on a schedule and it will automatically delete media files that meet your criteria, keeping your library fresh and clean without manual management.</p> <p>Warning</p> <p>Do not use this with media content you can't afford to lose. Enable the recycle bin in Sonarr/Radarr settings if you want to recover deleted files.</p>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started - Docker setup and first run</li> <li>Configuration Reference - All settings explained</li> <li>Templates - Copy-paste ready configurations</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"Service Required Purpose Plex Yes Media server to manage Tautulli Yes Watch history tracking Radarr No* Movie library management Sonarr No* TV show library management <p>*At least one of Radarr or Sonarr is required.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<ol> <li>Connects to your Plex, Tautulli, and Radarr/Sonarr instances</li> <li>Analyzes watch history and media metadata</li> <li>Filters media based on your rules (watched status, age, exclusions)</li> <li>Deletes matching media through Radarr/Sonarr</li> <li>Optionally triggers library scans and adds list exclusions</li> </ol>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#leaving-soon-collections","title":"Leaving Soon Collections","text":"<p>Deleterr's signature feature - a \"death row\" pattern where items are tagged to a \"Leaving Soon\" collection first, users get notified, and deletion happens on the next run. This gives users time to watch content before it's removed.</p> <p>Learn more about Leaving Soon</p>"},{"location":"#user-notifications","title":"User Notifications","text":"<p>Alert your users via Email, Discord, Slack, or Telegram about content that's expiring soon.</p> <p>Learn more about Notifications</p>"},{"location":"#smart-exclusions","title":"Smart Exclusions","text":"<p>Protect content by genre, actor, Plex labels, streaming availability (JustWatch), Trakt lists, and more.</p>"},{"location":"#multi-instance-support","title":"Multi-Instance Support","text":"<p>Configure multiple Radarr/Sonarr instances (e.g., separate 4K libraries) with different retention policies.</p>"},{"location":"#disk-thresholds","title":"Disk Thresholds","text":"<p>Only delete when disk space falls below a specified limit - perfect for space-constrained systems.</p>"},{"location":"#image-availability","title":"Image Availability","text":"<pre><code>ghcr.io/rfsbraz/deleterr:latest\nrfsbraz/deleterr:latest\n</code></pre> <p>Tags: <code>latest</code> (stable), <code>edge</code> (development), <code>X.Y.Z</code> (specific version)</p>"},{"location":"CONFIGURATION/","title":"Configuration Reference","text":"<p>Complete reference for all Deleterr configuration options.</p> <p>Deleterr's Leaving Soon feature implements a \"death row\" pattern\u2014items are first tagged to a Plex collection, users receive notifications, and deletion happens on the next run. See Leaving Soon and Leaving Soon Notifications for details.</p> <p>Auto-generated Documentation</p> <p>This documentation is auto-generated from the Pydantic schema. Run <code>python -m scripts.generate_docs</code> to regenerate after schema changes.</p>"},{"location":"CONFIGURATION/#environment-variables","title":"Environment Variables","text":"<p>You can use environment variables in your configuration file using the <code>!env</code> tag. This is useful for keeping sensitive information like API keys and tokens out of your configuration file.</p> <pre><code>plex:\n  url: \"http://localhost:32400\"\n  token: !env PLEX_TOKEN\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: !env TAUTULLI_API_KEY\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: !env RADARR_API_KEY\n</code></pre> <p>When using Docker, you can pass environment variables using the <code>-e</code> flag:</p> <pre><code>docker run -e PLEX_TOKEN=your_token -e TAUTULLI_API_KEY=your_key ...\n</code></pre> <p>Or in a <code>docker-compose.yml</code>:</p> <pre><code>services:\n  deleterr:\n    image: ghcr.io/rfsbraz/deleterr:latest\n    environment:\n      - PLEX_TOKEN=your_token\n      - TAUTULLI_API_KEY=your_key\n</code></pre> <p>Warning</p> <p>If an environment variable is not set, Deleterr will fail to start with an error message indicating which variable is missing.</p>"},{"location":"CONFIGURATION/#general-settings","title":"General Settings","text":"<p>Root-level settings that apply globally.</p> Property Type Required Default Description <code>dry_run</code> boolean No <code>true</code> If true, actions are only logged, not performed <code>ssl_verify</code> boolean No <code>false</code> Enable SSL certificate verification for API connections <code>action_delay</code> integer No <code>0</code> Delay (in seconds) between actions. Increase if Plex/Sonarr/Radarr timeout on remote mounts <code>plex_library_scan_after_actions</code> boolean No <code>false</code> Trigger a Plex library scan after actions are performed <code>tautulli_library_scan_after_actions</code> boolean No <code>false</code> Trigger a Tautulli library scan after actions are performed <pre><code>dry_run: true\nssl_verify: false\naction_delay: 25\nplex_library_scan_after_actions: false\ntautulli_library_scan_after_actions: false\n</code></pre>"},{"location":"CONFIGURATION/#plex","title":"Plex","text":"<p>Required. Connection details for your Plex server.</p> Property Type Required Default Description <code>url</code> string Yes - URL of your Plex server <code>token</code> string Yes - Plex authentication token. How to get <pre><code>plex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n</code></pre>"},{"location":"CONFIGURATION/#tautulli","title":"Tautulli","text":"<p>Required. Connection details for Tautulli (watch history tracking).</p> Property Type Required Default Description <code>url</code> string Yes - URL of your Tautulli server <code>api_key</code> string Yes - Tautulli API key <pre><code>tautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n</code></pre>"},{"location":"CONFIGURATION/#radarr","title":"Radarr","text":"<p>Connection settings for one or more Radarr instances.</p> Property Type Required Default Description <code>name</code> string Yes - Identifier for this Radarr instance (used in library config) <code>url</code> string Yes - URL of your Radarr server <code>api_key</code> string Yes - Radarr API key <pre><code>radarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n  - name: \"Radarr 4K\"\n    url: \"http://localhost:7879\"\n    api_key: \"YOUR_RADARR_4K_API_KEY\"\n</code></pre>"},{"location":"CONFIGURATION/#sonarr","title":"Sonarr","text":"<p>Connection settings for one or more Sonarr instances.</p> Property Type Required Default Description <code>name</code> string Yes - Identifier for this Sonarr instance (used in library config) <code>url</code> string Yes - URL of your Sonarr server <code>api_key</code> string Yes - Sonarr API key <pre><code>sonarr:\n  - name: \"Sonarr\"\n    url: \"http://localhost:8989\"\n    api_key: \"YOUR_SONARR_API_KEY\"\n  - name: \"Sonarr 4K\"\n    url: \"http://localhost:8990\"\n    api_key: \"YOUR_SONARR_4K_API_KEY\"\n</code></pre>"},{"location":"CONFIGURATION/#trakt","title":"Trakt","text":"<p>Optional. Required only for Trakt list exclusions.</p> Property Type Required Default Description <code>client_id</code> string Yes - Trakt client ID. Create an app at trakt.tv/oauth/applications <code>client_secret</code> string Yes - Trakt client secret <p>Create an application at trakt.tv/oauth/applications to get credentials.</p> <pre><code>trakt:\n  client_id: \"YOUR_TRAKT_CLIENT_ID\"\n  client_secret: \"YOUR_TRAKT_CLIENT_SECRET\"\n</code></pre>"},{"location":"CONFIGURATION/#justwatch","title":"JustWatch","text":"<p>Optional. Global settings for streaming availability lookups.</p> Property Type Required Default Description <code>country</code> string No - ISO 3166-1 alpha-2 country code (e.g., US, GB, DE) <code>language</code> string No <code>\"en\"</code> Language code for API responses <pre><code>justwatch:\n  country: \"US\"\n  language: \"en\"\n</code></pre>"},{"location":"CONFIGURATION/#overseerr","title":"Overseerr","text":"<p>Optional. Connection settings for Overseerr request-based exclusions.</p> Property Type Required Default Description <code>url</code> string Yes - URL of your Overseerr server <code>api_key</code> string Yes - Overseerr API key. Found in Overseerr Settings \u2192 General <pre><code>overseerr:\n  url: \"http://localhost:5055\"\n  api_key: \"YOUR_OVERSEERR_API_KEY\"\n</code></pre>"},{"location":"CONFIGURATION/#scheduler","title":"Scheduler","text":"<p>Optional. Built-in scheduler as an alternative to external schedulers like Ofelia or system cron.</p> <p>When enabled, Deleterr runs as a long-lived process and executes cleanup on the configured schedule. When disabled (default), Deleterr runs once and exits, suitable for triggering via external schedulers.</p> Property Type Required Default Description <code>enabled</code> boolean No <code>true</code> Enable built-in scheduler. Set to false for external schedulers (Ofelia, cron) where Deleterr should run once and exit <code>schedule</code> string No <code>\"weekly\"</code> Cron expression or preset (hourly, daily, weekly, monthly). Examples: 'weekly', '0 3 * * 0' (Sunday 3 AM) <code>timezone</code> string No <code>\"UTC\"</code> Timezone for schedule (e.g., 'America/New_York', 'Europe/London') <code>run_on_startup</code> boolean No <code>false</code> Run immediately when container starts, in addition to scheduled runs <p>Schedule Presets: - <code>hourly</code> - Every hour at minute 0 - <code>daily</code> - Daily at 3 AM - <code>weekly</code> - Sunday at 3 AM - <code>monthly</code> - First day of month at 3 AM</p> <p>Using a preset: <pre><code>scheduler:\n  enabled: true\n  schedule: \"weekly\"\n  timezone: \"America/New_York\"\n</code></pre></p> <p>Using a cron expression: <pre><code>scheduler:\n  enabled: true\n  schedule: \"0 3 * * 0\"  # Sunday at 3 AM\n  timezone: \"UTC\"\n  run_on_startup: true\n</code></pre></p> <p>Command-line overrides: - <code>--scheduler</code> - Force scheduler mode (overrides config) - <code>--run-once</code> - Force single run mode (overrides scheduler config)</p>"},{"location":"CONFIGURATION/#notifications","title":"Notifications","text":"<p>Optional. Configure notification providers to receive alerts when Deleterr deletes media.</p>"},{"location":"CONFIGURATION/#general-settings_1","title":"General Settings","text":"Property Type Required Default Description <code>enabled</code> boolean No <code>true</code> Enable/disable all notifications <code>notify_on_dry_run</code> boolean No <code>true</code> Send notifications even in dry-run mode <code>include_preview</code> boolean No <code>true</code> Include next scheduled deletions in notifications <code>min_deletions_to_notify</code> integer No <code>0</code> Minimum number of deletions required to send a notification. Set to 0 to always notify"},{"location":"CONFIGURATION/#discord","title":"Discord","text":"<p>Send notifications to Discord via webhooks with rich embeds.</p> Property Type Required Default Description <code>webhook_url</code> string No - Discord webhook URL. Create one in Server Settings \u2192 Integrations \u2192 Webhooks <code>username</code> string No <code>\"Deleterr\"</code> Bot username displayed in Discord <code>avatar_url</code> string No - URL to avatar image for the bot <pre><code>notifications:\n  enabled: true\n  notify_on_dry_run: true\n  include_preview: true\n  discord:\n    webhook_url: \"https://discord.com/api/webhooks/...\"\n    username: \"Deleterr\"\n    avatar_url: \"https://example.com/deleterr-avatar.png\"\n</code></pre>"},{"location":"CONFIGURATION/#slack","title":"Slack","text":"<p>Send notifications to Slack via Incoming Webhooks.</p> Property Type Required Default Description <code>webhook_url</code> string No - Slack Incoming Webhook URL. Create one at api.slack.com/apps <code>channel</code> string No - Override the default channel for this webhook <code>username</code> string No <code>\"Deleterr\"</code> Bot username displayed in Slack <code>icon_emoji</code> string No <code>\":wastebasket:\"</code> Emoji icon for the bot <pre><code>notifications:\n  slack:\n    webhook_url: \"https://hooks.slack.com/services/...\"\n    channel: \"#media-cleanup\"\n    username: \"Deleterr\"\n    icon_emoji: \":wastebasket:\"\n</code></pre>"},{"location":"CONFIGURATION/#telegram","title":"Telegram","text":"<p>Send notifications via Telegram Bot API.</p> Property Type Required Default Description <code>bot_token</code> string No - Telegram bot token from @BotFather <code>chat_id</code> string No - Telegram chat ID (user, group, or channel). Use @userinfobot to find your ID <code>parse_mode</code> string No <code>\"MarkdownV2\"</code> Message parsing mode: MarkdownV2, HTML, or Markdown <pre><code>notifications:\n  telegram:\n    bot_token: \"123456789:ABCdefGHIjklMNOpqrsTUVwxyz\"\n    chat_id: \"-1001234567890\"\n    parse_mode: \"MarkdownV2\"\n</code></pre>"},{"location":"CONFIGURATION/#webhook-generic","title":"Webhook (Generic)","text":"<p>Send JSON payloads to any HTTP endpoint for custom integrations.</p> Property Type Required Default Description <code>url</code> string No - Webhook URL to receive JSON payloads <code>method</code> string No <code>\"POST\"</code> HTTP method: POST or PUT <code>headers</code> dict[str, str] No - Custom HTTP headers to include with requests <code>timeout</code> integer No <code>30</code> Request timeout in seconds <pre><code>notifications:\n  webhook:\n    url: \"https://example.com/webhook\"\n    method: \"POST\"\n    headers:\n      Authorization: \"Bearer your-token\"\n      Content-Type: \"application/json\"\n    timeout: 30\n</code></pre>"},{"location":"CONFIGURATION/#email","title":"Email","text":"<p>Send notifications via SMTP email with HTML formatting.</p> Property Type Required Default Description <code>smtp_server</code> string No - SMTP server hostname <code>smtp_port</code> integer No <code>587</code> SMTP port (587 for TLS, 465 for SSL) <code>smtp_username</code> string No - SMTP username for authentication <code>smtp_password</code> string No - SMTP password for authentication <code>use_tls</code> boolean No <code>true</code> Use TLS encryption (STARTTLS on port 587) <code>use_ssl</code> boolean No <code>false</code> Use SSL encryption (implicit SSL on port 465) <code>from_address</code> string No - Sender email address <code>to_addresses</code> array[string] No <code>[]</code> Recipient email addresses <code>subject</code> string No <code>\"Deleterr Run Complete\"</code> Email subject line <pre><code>notifications:\n  email:\n    smtp_server: \"smtp.gmail.com\"\n    smtp_port: 587\n    smtp_username: !env SMTP_USERNAME\n    smtp_password: !env SMTP_PASSWORD\n    use_tls: true\n    from_address: \"deleterr@yourdomain.com\"\n    to_addresses:\n      - \"admin@yourdomain.com\"\n    subject: \"Deleterr Run Complete\"\n</code></pre> <p>Gmail Setup: 1. Enable 2-Step Verification on your Google account 2. Create an App Password for Deleterr 3. Use the app password as <code>smtp_password</code></p>"},{"location":"CONFIGURATION/#leaving-soon-notifications","title":"Leaving Soon Notifications","text":"<p>User-facing notifications specifically for items scheduled for deletion. These are separate from the admin deletion notifications above - they're designed to alert your users about content they should watch before it's removed.</p> <p>Note</p> <p>Providers configured under <code>leaving_soon</code> do NOT inherit from the parent notification config. You must explicitly configure each provider you want to use.</p> Property Type Required Default Description <code>leaving_soon.template</code> string No - Path to custom HTML template for emails. Uses built-in template if not specified <code>leaving_soon.subject</code> string No <code>\"Leaving Soon - Content scheduled for removal\"</code> Email subject for leaving soon notifications <code>leaving_soon.email</code> EmailNotificationConfig No - Email notification settings for leaving soon alerts <code>leaving_soon.discord</code> DiscordNotificationConfig No - Discord webhook settings for leaving soon alerts <code>leaving_soon.slack</code> SlackNotificationConfig No - Slack webhook settings for leaving soon alerts <code>leaving_soon.telegram</code> TelegramNotificationConfig No - Telegram settings for leaving soon alerts <code>leaving_soon.webhook</code> WebhookNotificationConfig No - Generic webhook settings for leaving soon alerts <p>Basic example (email only): <pre><code>notifications:\n  # Admin notifications (what was deleted)\n  discord:\n    webhook_url: !env DISCORD_ADMIN_WEBHOOK\n\n  # User-facing leaving soon notifications\n  leaving_soon:\n    subject: \"\ud83c\udfac Content leaving your Plex server soon!\"\n    email:\n      smtp_server: \"smtp.gmail.com\"\n      smtp_port: 587\n      smtp_username: !env SMTP_USERNAME\n      smtp_password: !env SMTP_PASSWORD\n      use_tls: true\n      from_address: \"plex@yourdomain.com\"\n      to_addresses:\n        - \"user1@example.com\"\n        - \"user2@example.com\"\n        - \"family@example.com\"\n</code></pre></p> <p>With custom template: <pre><code>notifications:\n  leaving_soon:\n    template: \"/config/my-custom-template.html\"\n    subject: \"Watch Before It's Gone!\"\n    email:\n      smtp_server: \"smtp.gmail.com\"\n      # ... email settings\n</code></pre></p> <p>Multiple providers for leaving soon: <pre><code>notifications:\n  leaving_soon:\n    email:\n      # Email for detailed notifications\n      smtp_server: \"smtp.gmail.com\"\n      # ... email settings\n    discord:\n      # Discord for quick alerts\n      webhook_url: !env DISCORD_USERS_WEBHOOK\n</code></pre></p> <p>The built-in template includes: - Warning explaining items will be removed - Tip box explaining how watching keeps items - Grouped sections for Movies and TV Shows - Links to Plex (if configured) - Links to Overseerr for re-requesting (if configured)</p>"},{"location":"CONFIGURATION/#multiple-providers","title":"Multiple Providers","text":"<p>You can configure multiple notification providers simultaneously:</p> <pre><code>notifications:\n  enabled: true\n  notify_on_dry_run: false\n  min_deletions_to_notify: 1\n  discord:\n    webhook_url: !env DISCORD_WEBHOOK_URL\n  telegram:\n    bot_token: !env TELEGRAM_BOT_TOKEN\n    chat_id: !env TELEGRAM_CHAT_ID\n</code></pre>"},{"location":"CONFIGURATION/#testing-notifications","title":"Testing Notifications","text":"<p>Test your notification configuration with sample data before relying on it:</p> <pre><code># Test leaving_soon notifications (default)\ndocker run --rm -v ./config:/config deleterr python -m scripts.test_notifications\n\n# Test run summary notifications\ndocker run --rm -v ./config:/config deleterr python -m scripts.test_notifications --type run_summary\n\n# Test a specific provider only\ndocker run --rm -v ./config:/config deleterr python -m scripts.test_notifications --provider email\n\n# Preview without sending (dry run)\ndocker run --rm -v ./config:/config deleterr python -m scripts.test_notifications --dry-run\n\n# Show configuration status\ndocker run --rm -v ./config:/config deleterr python -m scripts.test_notifications --status\n</code></pre> <p>The test script sends notifications with sample movie and TV show data so you can verify: - Email formatting and delivery - Discord/Slack/Telegram message appearance - Webhook payload structure - Template rendering (for leaving_soon)</p>"},{"location":"CONFIGURATION/#libraries","title":"Libraries","text":"<p>Configuration for each Plex library to manage.</p> Property Type Required Default Description <code>name</code> string Yes - Name of the Plex library (must match exactly) <code>radarr</code> string No - Name of the Radarr instance to use. Mutually exclusive with sonarr <code>sonarr</code> string No - Name of the Sonarr instance to use. Mutually exclusive with radarr <code>series_type</code> string (<code>standard</code>, <code>anime</code>, <code>daily</code>) No <code>\"standard\"</code> Series type filter for Sonarr libraries <code>action_mode</code> string (<code>delete</code>) Yes - Action to perform on matching media <code>watch_status</code> string (<code>watched</code>, <code>unwatched</code>) No - Filter by watch status. If not set, both watched and unwatched media are considered <code>last_watched_threshold</code> integer No - Days since last watch. Media watched within this period is protected <code>added_at_threshold</code> integer No - Days since added to Plex. Media added within this period is protected <code>apply_last_watch_threshold_to_collections</code> boolean No <code>false</code> Apply last watched threshold to all items in the same collection <code>add_list_exclusion_on_delete</code> boolean No <code>false</code> Prevent Radarr from re-importing deleted media from lists. Radarr only <code>max_actions_per_run</code> integer No <code>10</code> Maximum deletions per run <code>preview_next</code> integer No - Number of items to preview for next run. Defaults to max_actions_per_run. Set to 0 to disable <code>disk_size_threshold</code> array No <code>[]</code> Only delete when disk space is below threshold <code>sort</code> object No - Sorting configuration for deletion order <code>leaving_soon</code> object No - Configuration for 'death row' deletion pattern. Items are first tagged to collection/label, then deleted on the next run. Presence of this config enables the feature (no 'enabled' field needed) <p>*One of <code>radarr</code> or <code>sonarr</code> is required per library.</p>"},{"location":"CONFIGURATION/#disk-size-threshold","title":"Disk Size Threshold","text":"Property Type Required Default Description <code>path</code> string Yes - Path accessible by Sonarr/Radarr to check disk space <code>threshold</code> string Yes - Size threshold. Units: B, KB, MB, GB, TB, PB, EB"},{"location":"CONFIGURATION/#sort-configuration","title":"Sort Configuration","text":"Property Type Required Default Description <code>field</code> string No <code>\"title\"</code> Field(s) to sort by. Comma-separated for multi-level sorting. Options: title, size, release_year, runtime, added_date, rating, seasons, episodes, last_watched. Example: 'last_watched,size' sorts by watch status first, then size <code>order</code> string No <code>\"asc\"</code> Sort order(s): asc (ascending), desc (descending). Comma-separated to match fields. If fewer orders than fields, last order is reused. Example: 'desc,asc' or just 'desc'"},{"location":"CONFIGURATION/#leaving-soon","title":"Leaving Soon","text":"<p>Mark media scheduled for deletion with a Plex collection and/or labels. This implements a \"death row\" pattern where items are tagged on one run, then deleted on the next run.</p> Property Type Required Default Description <code>leaving_soon.collection</code> LeavingSoonCollectionConfig No - Configuration for the Leaving Soon collection <code>leaving_soon.labels</code> LeavingSoonLabelConfig No - Configuration for the Leaving Soon labels <p>Collection Settings:</p> Property Type Required Default Description <code>leaving_soon.collection.name</code> string No <code>\"Leaving Soon\"</code> Name of the collection to create in Plex <code>leaving_soon.collection.promote_home</code> boolean No <code>true</code> Promote collection to appear on your Plex Home page <code>leaving_soon.collection.promote_shared</code> boolean No <code>true</code> Promote collection to appear on shared users' Home pages (Friends' Home) <p>Label Settings:</p> Property Type Required Default Description <code>leaving_soon.labels.name</code> string No <code>\"leaving-soon\"</code> Label/tag to add to items scheduled for deletion <p>How it works: 1. First run: Items matching deletion criteria are tagged (added to collection/labeled), but NOT deleted 2. Subsequent runs: Previously tagged items are deleted, new candidates are tagged 3. This gives users a \"warning period\" to watch items before they're deleted</p> <p>Basic configuration with collection only: <pre><code>libraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    max_actions_per_run: 20\n    preview_next: 10\n    leaving_soon:\n      collection:\n        name: \"Leaving Soon\"\n</code></pre></p> <p>With both collection and labels: <pre><code>libraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    max_actions_per_run: 20\n    preview_next: 10\n    leaving_soon:\n      collection:\n        name: \"Leaving Soon\"\n      labels:\n        name: \"leaving-soon\"\n</code></pre></p> <p>Warning</p> <p><code>preview_next</code> cannot be set to <code>0</code> when <code>leaving_soon</code> is configured, as the feature needs to tag upcoming deletions.</p> <pre><code>libraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    watch_status: \"watched\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    apply_last_watch_threshold_to_collections: true\n    add_list_exclusion_on_delete: true\n    max_actions_per_run: 50\n    disk_size_threshold:\n      - path: \"/data/media\"\n        threshold: \"1TB\"\n    sort:\n      field: \"size\"\n      order: \"desc\"\n</code></pre>"},{"location":"CONFIGURATION/#exclusions","title":"Exclusions","text":"<p>Protect media from deletion based on metadata, Trakt lists, JustWatch, or Radarr-specific criteria.</p>"},{"location":"CONFIGURATION/#metadata-exclusions","title":"Metadata Exclusions","text":"Property Type Required Default Description <code>titles</code> array[string] No <code>[]</code> Exact titles to exclude <code>plex_labels</code> array[string] No <code>[]</code> Plex labels to exclude <code>genres</code> array[string] No <code>[]</code> Genres to exclude <code>collections</code> array[string] No <code>[]</code> Collections to exclude <code>actors</code> array[string] No <code>[]</code> Actors to exclude <code>producers</code> array[string] No <code>[]</code> Producers to exclude <code>directors</code> array[string] No <code>[]</code> Directors to exclude <code>writers</code> array[string] No <code>[]</code> Writers to exclude <code>studios</code> array[string] No <code>[]</code> Studios to exclude <code>release_years</code> integer No <code>0</code> Exclude media released within last X years <pre><code>exclude:\n  titles: [\"Forrest Gump\", \"The Godfather\"]\n  plex_labels: [\"favorite\", \"keep\"]\n  genres: [\"documentary\"]\n  collections: [\"Marvel Cinematic Universe\"]\n  actors: [\"Tom Hanks\"]\n  directors: [\"Christopher Nolan\"]\n  studios: [\"Studio Ghibli\", \"A24\"]\n  release_years: 2\n</code></pre>"},{"location":"CONFIGURATION/#trakt-exclusions","title":"Trakt Exclusions","text":"Property Type Required Default Description <code>trakt.max_items_per_list</code> integer No <code>100</code> Maximum items to fetch from each Trakt list <code>trakt.lists</code> array[string] No <code>[]</code> Trakt list URLs to exclude. Supports official lists (trending, popular) and user lists <p>Supports official lists and user lists:</p> <pre><code>exclude:\n  trakt:\n    max_items_per_list: 200\n    lists:\n      # Official Trakt lists\n      - \"https://trakt.tv/movies/trending\"\n      - \"https://trakt.tv/movies/popular\"\n      - \"https://trakt.tv/movies/watched/yearly\"\n      # User lists\n      - \"https://trakt.tv/users/justin/lists/imdb-top-rated-movies\"\n</code></pre>"},{"location":"CONFIGURATION/#justwatch-exclusions","title":"JustWatch Exclusions","text":"<p>Exclude based on streaming availability. <code>available_on</code> and <code>not_available_on</code> are mutually exclusive.</p> Property Type Required Default Description <code>justwatch.country</code> string No - Override global country setting for this library <code>justwatch.language</code> string No - Override global language setting for this library <code>justwatch.available_on</code> array[string] No - Exclude media available on these providers. Use ['any'] for any service. Mutually exclusive with not_available_on <code>justwatch.not_available_on</code> array[string] No - Exclude media NOT available on these providers. Mutually exclusive with available_on <p>Common providers: <code>netflix</code>, <code>amazon</code>, <code>disneyplus</code>, <code>hbomax</code>, <code>max</code>, <code>hulu</code>, <code>appletvplus</code>, <code>peacocktv</code>, <code>paramountplus</code>, <code>crunchyroll</code>, <code>stan</code>, <code>binge</code></p> <p>Keep media that's available on streaming: <pre><code>exclude:\n  justwatch:\n    country: \"US\"\n    available_on: [\"netflix\", \"disneyplus\"]\n</code></pre></p> <p>Keep media NOT available on streaming: <pre><code>exclude:\n  justwatch:\n    country: \"US\"\n    not_available_on: [\"any\"]\n</code></pre></p>"},{"location":"CONFIGURATION/#radarr-exclusions-movies-only","title":"Radarr Exclusions (Movies Only)","text":"<p>Exclude based on Radarr-specific metadata. Only applies to movie libraries.</p> Property Type Required Default Description <code>radarr.tags</code> array[string] No <code>[]</code> Radarr tags to exclude (case-insensitive) <code>radarr.quality_profiles</code> array[string] No <code>[]</code> Quality profiles to exclude (exact match) <code>radarr.paths</code> array[string] No <code>[]</code> Paths to exclude (substring match) <code>radarr.monitored</code> boolean No - True to exclude monitored movies, False to exclude unmonitored <pre><code>exclude:\n  radarr:\n    tags: [\"4K\", \"keep\", \"favorite\"]\n    quality_profiles: [\"Remux-2160p\", \"Bluray-2160p\"]\n    paths: [\"/data/media/4k\", \"/data/protected\"]\n    monitored: true\n</code></pre>"},{"location":"CONFIGURATION/#sonarr-exclusions-tv-shows-only","title":"Sonarr Exclusions (TV Shows Only)","text":"<p>Exclude based on Sonarr-specific metadata. Only applies to TV show libraries.</p> Property Type Required Default Description <code>sonarr.status</code> array[string] No <code>[]</code> Sonarr series status to exclude: continuing, ended, upcoming, deleted <code>sonarr.tags</code> array[string] No <code>[]</code> Sonarr tags to exclude (case-insensitive) <code>sonarr.quality_profiles</code> array[string] No <code>[]</code> Quality profiles to exclude (exact match) <code>sonarr.paths</code> array[string] No <code>[]</code> Paths to exclude (substring match) <code>sonarr.monitored</code> boolean No - True to exclude monitored shows, False to exclude unmonitored <p>Protect continuing shows from deletion: <pre><code>exclude:\n  sonarr:\n    status: [\"continuing\", \"upcoming\"]\n</code></pre></p> <p>Protect tagged shows: <pre><code>exclude:\n  sonarr:\n    tags: [\"4K\", \"keep\", \"favorite\"]\n    quality_profiles: [\"Remux-2160p\"]\n    paths: [\"/data/media/4k\"]\n    monitored: true\n</code></pre></p>"},{"location":"CONFIGURATION/#overseerr-exclusions","title":"Overseerr Exclusions","text":"<p>Exclude or include media based on Overseerr request status. Requires global <code>overseerr</code> config.</p> Property Type Required Default Description <code>overseerr.mode</code> string (<code>exclude</code>, <code>include_only</code>) No <code>\"exclude\"</code> How to handle requested media. <code>exclude</code> protects requested items from deletion. <code>include_only</code> deletes ONLY requested items <code>overseerr.users</code> array[string] No <code>[]</code> Only consider requests from these users (username, email, or Plex username). If empty, all requests are considered <code>overseerr.include_pending</code> boolean No <code>true</code> Whether to include pending (not yet approved) requests <code>overseerr.request_status</code> array[string] No <code>[]</code> Only consider requests with these statuses: <code>pending</code>, <code>approved</code>, <code>declined</code>. If empty, all statuses are considered <code>overseerr.min_request_age_days</code> integer No <code>0</code> Only consider requests older than this many days <code>overseerr.update_status</code> boolean No <code>false</code> After deletion, mark the media as deleted in Overseerr so it can be requested again <p>Protect requested content: <pre><code>exclude:\n  overseerr:\n    mode: \"exclude\"\n    include_pending: true\n</code></pre></p> <p>Cleanup old user requests: <pre><code>exclude:\n  overseerr:\n    mode: \"include_only\"\n    users: [\"user1\"]\n    request_status: [\"approved\"]\n    min_request_age_days: 90\n    update_status: true\n</code></pre></p>"},{"location":"CONFIGURATION/#complete-example","title":"Complete Example","text":"<pre><code>dry_run: true\nssl_verify: false\naction_delay: 10\nplex_library_scan_after_actions: false\n\n# Built-in scheduler (remove this section to use external scheduler like Ofelia)\nscheduler:\n  enabled: true\n  schedule: \"weekly\"\n  timezone: \"UTC\"\n\n# Discord notifications for deletion alerts\nnotifications:\n  enabled: true\n  notify_on_dry_run: true\n  include_preview: true\n  min_deletions_to_notify: 1\n  discord:\n    webhook_url: !env DISCORD_WEBHOOK_URL\n    username: \"Deleterr\"\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\nsonarr:\n  - name: \"Sonarr\"\n    url: \"http://localhost:8989\"\n    api_key: \"YOUR_SONARR_API_KEY\"\n\ntrakt:\n  client_id: \"YOUR_TRAKT_CLIENT_ID\"\n  client_secret: \"YOUR_TRAKT_CLIENT_SECRET\"\n\njustwatch:\n  country: \"US\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    watch_status: \"watched\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    apply_last_watch_threshold_to_collections: true\n    add_list_exclusion_on_delete: true\n    max_actions_per_run: 20\n    sort:\n      field: \"size\"\n      order: \"desc\"\n    exclude:\n      plex_labels: [\"favorite\", \"keep\"]\n      genres: [\"documentary\"]\n      release_years: 2\n      trakt:\n        max_items_per_list: 100\n        lists:\n          - \"https://trakt.tv/movies/trending\"\n          - \"https://trakt.tv/movies/popular\"\n      justwatch:\n        not_available_on: [\"any\"]\n      radarr:\n        tags: [\"keep\"]\n        monitored: true\n\n  - name: \"TV Shows\"\n    sonarr: \"Sonarr\"\n    series_type: \"standard\"\n    action_mode: \"delete\"\n    last_watched_threshold: 180\n    added_at_threshold: 365\n    max_actions_per_run: 10\n    exclude:\n      plex_labels: [\"favorite\"]\n      trakt:\n        lists:\n          - \"https://trakt.tv/shows/trending\"\n      sonarr:\n        status: [\"continuing\", \"upcoming\"]\n        tags: [\"keep\"]\n        monitored: true\n</code></pre>"},{"location":"CONFIGURATION/#next-steps","title":"Next Steps","text":"<ul> <li>Templates - Ready-to-use configuration examples</li> <li>Getting Started - Installation guide</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide walks you through deploying Deleterr and running your first cleanup.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have:</p> <ul> <li>[ ] Plex Media Server with a valid token (how to get token)</li> <li>[ ] Tautulli installed and configured with API key</li> <li>[ ] Radarr and/or Sonarr with API keys</li> <li>[ ] Docker installed on your system</li> </ul>"},{"location":"getting-started/#docker-compose-setup","title":"Docker Compose Setup","text":"<p>There are two ways to schedule Deleterr: using the built-in scheduler (recommended for simplicity) or an external scheduler like Ofelia.</p> Built-in Scheduler (Recommended)External Scheduler (Ofelia)Standalone Docker <p>The simplest setup - Deleterr handles its own scheduling:</p> <pre><code>version: \"3.9\"\nservices:\n  deleterr:\n    image: ghcr.io/rfsbraz/deleterr:latest\n    container_name: deleterr\n    environment:\n      LOG_LEVEL: INFO\n    volumes:\n      - ./config:/config\n      - ./logs:/config/logs\n    restart: unless-stopped\n</code></pre> <p>Add to your <code>settings.yaml</code>: <pre><code>scheduler:\n  enabled: true\n  schedule: \"weekly\"  # or \"daily\", \"hourly\", \"monthly\", or cron expression\n  timezone: \"America/New_York\"\n</code></pre></p> <p>For more advanced scheduling control, use Ofelia:</p> <pre><code>version: \"3.9\"\nservices:\n  deleterr:\n    image: ghcr.io/rfsbraz/deleterr:latest\n    container_name: deleterr\n    environment:\n      LOG_LEVEL: INFO\n    volumes:\n      - ./config:/config\n      - ./logs:/config/logs\n    restart: no\n\n  scheduler:\n    image: mcuadros/ofelia:latest\n    container_name: scheduler\n    depends_on:\n      - deleterr\n    command: daemon --docker\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    restart: unless-stopped\n    labels:\n      ofelia.job-run.deleterr.schedule: \"@weekly\"\n      ofelia.job-run.deleterr.container: \"deleterr\"\n</code></pre> <p>Run Deleterr manually without a scheduler:</p> <pre><code>docker run -v ./config:/config -v ./logs:/config/logs \\\n  -e LOG_LEVEL=DEBUG \\\n  ghcr.io/rfsbraz/deleterr:latest\n</code></pre>"},{"location":"getting-started/#create-settingsyaml","title":"Create settings.yaml","text":"<p>Create <code>config/settings.yaml</code> with your configuration. Start with dry run enabled:</p> <pre><code>dry_run: true  # Preview changes without deleting\n\nplex:\n  url: \"http://plex:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://tautulli:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://radarr:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n</code></pre>"},{"location":"getting-started/#start-the-stack","title":"Start the Stack","text":"<pre><code>docker compose up -d\n</code></pre>"},{"location":"getting-started/#scheduling-options","title":"Scheduling Options","text":""},{"location":"getting-started/#built-in-scheduler","title":"Built-in Scheduler","text":"<p>The built-in scheduler supports presets and standard cron expressions:</p> Schedule Value Weekly (Sunday 3am) <code>weekly</code> Daily at 3am <code>daily</code> Hourly <code>hourly</code> Monthly (1st at 3am) <code>monthly</code> Custom cron <code>0 3 * * 0</code> (Sunday 3am) <p>Example configuration: <pre><code>scheduler:\n  enabled: true\n  schedule: \"0 4 * * 1,4\"  # Monday and Thursday at 4am\n  timezone: \"Europe/London\"\n  run_on_startup: true  # Also run when container starts\n</code></pre></p>"},{"location":"getting-started/#ofelia-external-scheduler","title":"Ofelia (External Scheduler)","text":"<p>If using Ofelia, common scheduling patterns:</p> Schedule Label Value Weekly (Sunday midnight) <code>@weekly</code> Daily at 3am <code>0 3 * * *</code> Every 6 hours <code>@every 6h</code> Monthly <code>@monthly</code> <p>See Ofelia documentation for full syntax.</p>"},{"location":"getting-started/#portainer-deployment","title":"Portainer Deployment","text":"<p>When deploying with Portainer, you may encounter bind mount errors because Portainer doesn't auto-create host directories.</p> Enable Path CreationCreate Directories ManuallyNamed Volumes <p>In Portainer CE 2.19+: Stacks &gt; Add stack &gt; Advanced options &gt; Enable \"Create path on host if it doesn't exist\"</p> <pre><code>mkdir -p /path/to/deleterr/config\nmkdir -p /path/to/deleterr/logs\n</code></pre> <p>Then use absolute paths in your stack.</p> <pre><code>volumes:\n  - deleterr_config:/config\n  - deleterr_logs:/config/logs\n\n# Add at bottom of compose file:\nvolumes:\n  deleterr_config:\n  deleterr_logs:\n</code></pre> <p>Note: With named volumes, copy settings.yaml using: <code>docker cp settings.yaml deleterr:/config/settings.yaml</code></p>"},{"location":"getting-started/#first-run-walkthrough","title":"First Run Walkthrough","text":"<ol> <li>Start with dry_run: true - This logs what would be deleted without actually deleting</li> <li>Check logs - Review <code>logs/deleterr.log</code> to see what media would be affected</li> <li>Adjust thresholds - Modify <code>last_watched_threshold</code> and <code>added_at_threshold</code> based on results</li> <li>Add exclusions - Protect important media with exclusion rules</li> <li>Disable dry_run - Set <code>dry_run: false</code> when satisfied with the preview</li> <li>Enable scheduling - Let Deleterr run automatically</li> </ol>"},{"location":"getting-started/#verifying-configuration","title":"Verifying Configuration","text":"<p>Run Deleterr once manually to verify your setup:</p> <pre><code>docker compose run --rm deleterr\n</code></pre> <p>Check the logs for:</p> <ul> <li>Successful connections to Plex, Tautulli, Radarr/Sonarr</li> <li>Media items identified for deletion</li> <li>Any errors or warnings</li> </ul>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - Full list of all settings</li> <li>Templates - Ready-to-use configuration examples</li> <li>Leaving Soon - Set up user notifications before deletion</li> </ul>"},{"location":"templates/","title":"Configuration Templates","text":"<p>Ready-to-use configurations for common scenarios. Copy, paste, and customize.</p>"},{"location":"templates/#docker-compose-examples","title":"Docker Compose Examples","text":"Built-in Scheduler (Recommended)External Scheduler (Ofelia) <p>Single container with integrated scheduling:</p> <pre><code>version: \"3.9\"\nservices:\n  deleterr:\n    image: ghcr.io/rfsbraz/deleterr:latest\n    container_name: deleterr\n    environment:\n      LOG_LEVEL: INFO\n      TZ: America/New_York\n    volumes:\n      - ./config:/config\n      - ./logs:/config/logs\n    restart: unless-stopped\n</code></pre> <p>Add to your <code>settings.yaml</code>: <pre><code>scheduler:\n  enabled: true\n  schedule: \"weekly\"\n  timezone: \"America/New_York\"\n</code></pre></p> <p>For advanced scheduling with Docker socket access:</p> <pre><code>version: \"3.9\"\nservices:\n  deleterr:\n    image: ghcr.io/rfsbraz/deleterr:latest\n    container_name: deleterr\n    environment:\n      LOG_LEVEL: INFO\n    volumes:\n      - ./config:/config\n      - ./logs:/config/logs\n    restart: no\n\n  scheduler:\n    image: mcuadros/ofelia:latest\n    container_name: scheduler\n    depends_on:\n      - deleterr\n    command: daemon --docker\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    restart: unless-stopped\n    labels:\n      ofelia.job-run.deleterr.schedule: \"@weekly\"\n      ofelia.job-run.deleterr.container: \"deleterr\"\n</code></pre>"},{"location":"templates/#1-minimal-movies","title":"1. Minimal Movies","text":"<p>Basic single-library setup with sensible defaults.</p> <pre><code>dry_run: true\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    max_actions_per_run: 10\n</code></pre> <p>What it does: Deletes movies watched more than 90 days ago, if they were added more than 180 days ago. Limits to 10 deletions per run.</p>"},{"location":"templates/#2-4k-multi-instance","title":"2. 4K Multi-Instance","text":"<p>Separate management for standard and 4K libraries.</p> <pre><code>dry_run: true\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n  - name: \"Radarr 4K\"\n    url: \"http://localhost:7879\"\n    api_key: \"YOUR_RADARR_4K_API_KEY\"\n\nsonarr:\n  - name: \"Sonarr\"\n    url: \"http://localhost:8989\"\n    api_key: \"YOUR_SONARR_API_KEY\"\n  - name: \"Sonarr 4K\"\n    url: \"http://localhost:8990\"\n    api_key: \"YOUR_SONARR_4K_API_KEY\"\n\nlibraries:\n  # Standard quality - more aggressive\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 60\n    added_at_threshold: 90\n    max_actions_per_run: 50\n\n  # 4K - more conservative\n  - name: \"Movies 4K\"\n    radarr: \"Radarr 4K\"\n    action_mode: \"delete\"\n    last_watched_threshold: 180\n    added_at_threshold: 365\n    max_actions_per_run: 10\n\n  - name: \"TV Shows\"\n    sonarr: \"Sonarr\"\n    series_type: \"standard\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    max_actions_per_run: 20\n\n  - name: \"TV Shows 4K\"\n    sonarr: \"Sonarr 4K\"\n    series_type: \"standard\"\n    action_mode: \"delete\"\n    last_watched_threshold: 365\n    added_at_threshold: 365\n    max_actions_per_run: 5\n</code></pre> <p>What it does: Manages 4 libraries with different retention policies. 4K content has longer thresholds and lower deletion limits.</p>"},{"location":"templates/#3-aggressive-disk-management","title":"3. Aggressive Disk Management","text":"<p>Size-based sorting with disk thresholds for space-constrained systems.</p> <pre><code>dry_run: true\naction_delay: 5\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\nsonarr:\n  - name: \"Sonarr\"\n    url: \"http://localhost:8989\"\n    api_key: \"YOUR_SONARR_API_KEY\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 30\n    added_at_threshold: 60\n    max_actions_per_run: 100\n    disk_size_threshold:\n      - path: \"/data/media\"\n        threshold: 500GB\n    sort:\n      field: \"size\"\n      order: \"desc\"  # Delete largest files first\n    exclude:\n      release_years: 1  # Keep movies from last year\n\n  - name: \"TV Shows\"\n    sonarr: \"Sonarr\"\n    series_type: \"standard\"\n    action_mode: \"delete\"\n    last_watched_threshold: 30\n    added_at_threshold: 60\n    max_actions_per_run: 50\n    disk_size_threshold:\n      - path: \"/data/media\"\n        threshold: 500GB\n    sort:\n      field: \"size\"\n      order: \"desc\"\n</code></pre> <p>What it does: Only deletes when disk space falls below 500GB. Prioritizes largest files first. Short retention periods with high deletion limits.</p>"},{"location":"templates/#4-preservation-focus","title":"4. Preservation Focus","text":"<p>Heavy exclusions to protect valuable content.</p> <pre><code>dry_run: true\naction_delay: 10\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\ntrakt:\n  client_id: \"YOUR_TRAKT_CLIENT_ID\"\n  client_secret: \"YOUR_TRAKT_CLIENT_SECRET\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    add_list_exclusion_on_delete: true\n    last_watched_threshold: 365\n    added_at_threshold: 365\n    apply_last_watch_threshold_to_collections: true\n    max_actions_per_run: 5\n    sort:\n      field: \"rating\"\n      order: \"asc\"  # Delete lowest rated first\n    exclude:\n      # Metadata exclusions\n      plex_labels: [\"favorite\", \"keep\", \"classic\"]\n      genres: [\"documentary\"]\n      release_years: 3\n      collections:\n        - \"Marvel Cinematic Universe\"\n        - \"Star Wars Collection\"\n        - \"The Lord of the Rings Collection\"\n        - \"Harry Potter Collection\"\n        - \"DC Extended Universe\"\n      actors:\n        - \"Christopher Nolan\"\n        - \"Denis Villeneuve\"\n      directors:\n        - \"Christopher Nolan\"\n        - \"Denis Villeneuve\"\n        - \"Quentin Tarantino\"\n      studios:\n        - \"Studio Ghibli\"\n        - \"A24\"\n        - \"Pixar\"\n      # Trakt exclusions\n      trakt:\n        max_items_per_list: 200\n        lists:\n          - \"https://trakt.tv/movies/trending\"\n          - \"https://trakt.tv/movies/popular\"\n          - \"https://trakt.tv/movies/watched/yearly\"\n          - \"https://trakt.tv/users/justin/lists/imdb-top-rated-movies\"\n      # Radarr exclusions\n      radarr:\n        tags: [\"keep\", \"4k\", \"hdr\"]\n        quality_profiles: [\"Remux-2160p\"]\n        monitored: true  # Keep monitored movies\n</code></pre> <p>What it does: Extremely conservative deletion with 1-year thresholds, extensive exclusions by metadata/Trakt/Radarr tags, and only 5 deletions per run.</p>"},{"location":"templates/#5-streaming-aware","title":"5. Streaming-Aware","text":"<p>JustWatch integration to keep locally what's not streaming.</p> <pre><code>dry_run: true\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\njustwatch:\n  country: \"US\"\n  language: \"en\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    max_actions_per_run: 20\n    exclude:\n      justwatch:\n        # Keep movies NOT available on streaming (you can only watch them locally)\n        not_available_on: [\"any\"]\n\n  - name: \"Streaming Copies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 30\n    added_at_threshold: 90\n    max_actions_per_run: 50\n    exclude:\n      justwatch:\n        # Delete freely if available on your streaming services\n        available_on: [\"netflix\", \"disneyplus\", \"amazon\", \"hbomax\", \"hulu\"]\n</code></pre> <p>What it does:</p> <ul> <li>Main library: Preserves movies not available on any streaming service</li> <li>Streaming copies: More aggressive deletion of content available on your subscribed services</li> </ul>"},{"location":"templates/#6-protect-unwatched-overseerr-requests","title":"6. Protect Unwatched Overseerr Requests","text":"<p>Keep content that users requested but haven't watched yet.</p> <pre><code>dry_run: true\n\nplex:\n  url: \"http://localhost:32400\"\n  token: \"YOUR_PLEX_TOKEN\"\n\ntautulli:\n  url: \"http://localhost:8181\"\n  api_key: \"YOUR_TAUTULLI_API_KEY\"\n\nradarr:\n  - name: \"Radarr\"\n    url: \"http://localhost:7878\"\n    api_key: \"YOUR_RADARR_API_KEY\"\n\nsonarr:\n  - name: \"Sonarr\"\n    url: \"http://localhost:8989\"\n    api_key: \"YOUR_SONARR_API_KEY\"\n\noverseerr:\n  url: \"http://localhost:5055\"\n  api_key: \"YOUR_OVERSEERR_API_KEY\"\n\nlibraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    max_actions_per_run: 20\n    exclude:\n      overseerr:\n        mode: \"exclude\"\n        include_pending: true\n        request_status: [\"approved\", \"pending\"]\n\n  - name: \"TV Shows\"\n    sonarr: \"Sonarr\"\n    series_type: \"standard\"\n    action_mode: \"delete\"\n    last_watched_threshold: 90\n    added_at_threshold: 180\n    max_actions_per_run: 20\n    exclude:\n      overseerr:\n        mode: \"exclude\"\n        include_pending: true\n        request_status: [\"approved\", \"pending\"]\n</code></pre> <p>What it does: Protects all content that was requested through Overseerr (approved or pending). Only deletes content that wasn't explicitly requested by a user. This ensures users don't lose content they asked for before they've had a chance to watch it.</p>"},{"location":"templates/#variations","title":"Variations","text":"<p>Protect requests from specific users only: <pre><code>exclude:\n  overseerr:\n    mode: \"exclude\"\n    users: [\"admin\", \"family-member\"]\n</code></pre></p> <p>Only protect recent requests (give users 30 days to watch): <pre><code>exclude:\n  overseerr:\n    mode: \"exclude\"\n    min_request_age_days: 30  # Requests older than 30 days can be deleted\n</code></pre></p>"},{"location":"templates/#common-exclusion-patterns","title":"Common Exclusion Patterns","text":""},{"location":"templates/#protect-mcu-and-major-franchises","title":"Protect MCU and Major Franchises","text":"<pre><code>exclude:\n  collections:\n    - \"Marvel Cinematic Universe\"\n    - \"DC Extended Universe\"\n    - \"Star Wars Collection\"\n    - \"The Lord of the Rings Collection\"\n    - \"Harry Potter Collection\"\n    - \"James Bond Collection\"\n    - \"Fast &amp; Furious Collection\"\n    - \"Mission: Impossible Collection\"\n    - \"Jurassic Park Collection\"\n    - \"The Matrix Collection\"\n</code></pre>"},{"location":"templates/#protect-by-plex-labels","title":"Protect by Plex Labels","text":"<p>Add labels in Plex, then exclude them:</p> <pre><code>exclude:\n  plex_labels:\n    - \"favorite\"\n    - \"keep\"\n    - \"classic\"\n    - \"family\"\n    - \"rewatch\"\n</code></pre>"},{"location":"templates/#protect-trendingpopular-content","title":"Protect Trending/Popular Content","text":"<pre><code>trakt:\n  client_id: \"YOUR_TRAKT_CLIENT_ID\"\n  client_secret: \"YOUR_TRAKT_CLIENT_SECRET\"\n\nlibraries:\n  - name: \"Movies\"\n    exclude:\n      trakt:\n        max_items_per_list: 100\n        lists:\n          - \"https://trakt.tv/movies/trending\"\n          - \"https://trakt.tv/movies/popular\"\n          - \"https://trakt.tv/movies/watched/weekly\"\n          - \"https://trakt.tv/movies/anticipated\"\n</code></pre>"},{"location":"templates/#protect-by-quality-radarr","title":"Protect by Quality (Radarr)","text":"<pre><code>exclude:\n  radarr:\n    tags: [\"4k\", \"hdr\", \"dolby-vision\", \"remux\"]\n    quality_profiles: [\"Remux-2160p\", \"Bluray-2160p\"]\n    paths: [\"/data/media/4k\"]\n</code></pre>"},{"location":"templates/#anime-library-configuration","title":"Anime Library Configuration","text":"<pre><code>libraries:\n  - name: \"Anime\"\n    sonarr: \"Sonarr\"\n    series_type: \"anime\"  # Important: filters for anime type\n    action_mode: \"delete\"\n    last_watched_threshold: 365\n    added_at_threshold: 180\n    max_actions_per_run: 10\n    sort:\n      field: \"episodes\"\n      order: \"desc\"  # Delete shows with most episodes first\n    exclude:\n      titles:\n        - \"Dragon Ball\"\n        - \"Dragon Ball Z\"\n        - \"Naruto\"\n        - \"One Piece\"\n      studios:\n        - \"Studio Ghibli\"\n        - \"Kyoto Animation\"\n        - \"Madhouse\"\n      trakt:\n        max_items_per_list: 100\n        lists:\n          - \"https://trakt.tv/users/lwerndly/lists/anime-best-series-of-all-time\"\n</code></pre>"},{"location":"templates/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - Detailed documentation of all options</li> <li>Getting Started - Installation and setup guide</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions for Deleterr.</p>"},{"location":"troubleshooting/#connection-issues","title":"Connection Issues","text":""},{"location":"troubleshooting/#plex-connection-failed","title":"Plex Connection Failed","text":"<p>Symptoms: <code>Failed to connect to Plex</code> or <code>Plex token invalid</code></p> <p>Solutions:</p> <ol> <li> <p>Verify URL format: Include protocol and port    <pre><code>plex:\n  url: \"http://192.168.1.100:32400\"  # Not just \"192.168.1.100\"\n</code></pre></p> </li> <li> <p>Check token: Get a fresh token from Plex documentation</p> </li> <li> <p>SSL issues: If using HTTPS with self-signed certificates:    <pre><code>ssl_verify: false\n</code></pre></p> </li> <li> <p>Network access: Ensure Deleterr container can reach Plex    <pre><code>docker exec deleterr curl -s http://plex:32400/identity\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#tautulli-connection-failed","title":"Tautulli Connection Failed","text":"<p>Symptoms: <code>Failed to connect to Tautulli</code> or <code>API key invalid</code></p> <p>Solutions:</p> <ol> <li> <p>Find API key: Tautulli &gt; Settings &gt; Web Interface &gt; API Key</p> </li> <li> <p>Test connection:    <pre><code>curl \"http://tautulli:8181/api/v2?apikey=YOUR_KEY&amp;cmd=get_server_info\"\n</code></pre></p> </li> <li> <p>Check API access: Ensure API is enabled in Tautulli settings</p> </li> </ol>"},{"location":"troubleshooting/#radarrsonarr-connection-failed","title":"Radarr/Sonarr Connection Failed","text":"<p>Symptoms: <code>Failed to connect to Radarr/Sonarr</code></p> <p>Solutions:</p> <ol> <li> <p>Find API key: Settings &gt; General &gt; Security &gt; API Key</p> </li> <li> <p>Verify URL: Include <code>/api/v3</code> is NOT needed - Deleterr handles this</p> </li> <li> <p>Test connection:    <pre><code>curl -H \"X-Api-Key: YOUR_KEY\" http://radarr:7878/api/v3/system/status\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#library-issues","title":"Library Issues","text":""},{"location":"troubleshooting/#library-not-found","title":"Library Not Found","text":"<p>Symptoms: <code>Library 'Movies' not found in Plex</code></p> <p>Solutions:</p> <ol> <li> <p>Check exact name: Library name must match exactly (case-sensitive)    <pre><code># List Plex libraries\ncurl -H \"X-Plex-Token: YOUR_TOKEN\" \\\n  http://plex:32400/library/sections | grep title\n</code></pre></p> </li> <li> <p>Use Plex library name: Not the folder name or Radarr root folder name</p> </li> </ol>"},{"location":"troubleshooting/#no-items-found-for-deletion","title":"No Items Found for Deletion","text":"<p>Symptoms: Run completes but finds no items</p> <p>Solutions:</p> <ol> <li> <p>Check thresholds: Items must meet ALL criteria    <pre><code>last_watched_threshold: 90   # Watched 90+ days ago\nadded_at_threshold: 180      # Added 180+ days ago\n</code></pre></p> </li> <li> <p>Verify watch history: Ensure Tautulli has watch data</p> </li> <li> <p>Check exclusions: Your exclusion rules might be too broad</p> </li> <li> <p>Review watch_status:    <pre><code>watch_status: \"watched\"     # Only delete watched items\nwatch_status: \"unwatched\"   # Only delete unwatched items\nwatch_status: \"all\"         # Delete regardless of watch status\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#wrong-items-being-deleted","title":"Wrong Items Being Deleted","text":"<p>Symptoms: Items deleted that shouldn't be</p> <p>Solutions:</p> <ol> <li> <p>Always start with dry_run:    <pre><code>dry_run: true\n</code></pre></p> </li> <li> <p>Add exclusions: Protect important content    <pre><code>exclude:\n  plex_labels: [\"favorite\", \"keep\"]\n  collections: [\"Marvel Cinematic Universe\"]\n</code></pre></p> </li> <li> <p>Check library mapping: Ensure Radarr/Sonarr instance matches the Plex library</p> </li> </ol>"},{"location":"troubleshooting/#disk-threshold-issues","title":"Disk Threshold Issues","text":""},{"location":"troubleshooting/#threshold-not-working","title":"Threshold Not Working","text":"<p>Symptoms: Items deleted even when disk has space (or not deleted when low)</p> <p>Solutions:</p> <ol> <li> <p>Verify path: Must be a path accessible inside the container    <pre><code>disk_size_threshold:\n  - path: \"/data/media\"      # Container path, not host path\n    threshold: \"500GB\"\n</code></pre></p> </li> <li> <p>Check mount: Ensure the volume is mounted correctly    <pre><code>docker exec deleterr df -h /data/media\n</code></pre></p> </li> <li> <p>Threshold format: Use quotes and valid units    <pre><code>threshold: \"500GB\"   # Correct\nthreshold: 500GB     # May cause issues\nthreshold: \"500\"     # Assumes bytes\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#notification-issues","title":"Notification Issues","text":"<p>See Notifications Troubleshooting for notification-specific issues.</p>"},{"location":"troubleshooting/#docker-issues","title":"Docker Issues","text":""},{"location":"troubleshooting/#container-exits-immediately","title":"Container Exits Immediately","text":"<p>Symptoms: Container starts and stops immediately</p> <p>Solutions:</p> <ol> <li> <p>Check logs:    <pre><code>docker logs deleterr\n</code></pre></p> </li> <li> <p>Verify config file: Ensure <code>settings.yaml</code> exists and is valid    <pre><code>docker run --rm -v ./config:/config deleterr \\\n  python -c \"import yaml; yaml.safe_load(open('/config/settings.yaml'))\"\n</code></pre></p> </li> <li> <p>Check scheduler: If using built-in scheduler, container should stay running    <pre><code>scheduler:\n  enabled: true\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#permission-denied-errors","title":"Permission Denied Errors","text":"<p>Symptoms: <code>Permission denied</code> when accessing config or logs</p> <p>Solutions:</p> <ol> <li> <p>Check ownership: Container runs as UID 1000 by default    <pre><code>sudo chown -R 1000:1000 ./config ./logs\n</code></pre></p> </li> <li> <p>Or use PUID/PGID:    <pre><code>environment:\n  - PUID=1000\n  - PGID=1000\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#config-changes-not-applied","title":"Config Changes Not Applied","text":"<p>Symptoms: Changes to <code>settings.yaml</code> don't take effect</p> <p>Solutions:</p> <ol> <li> <p>Restart container:    <pre><code>docker compose restart deleterr\n</code></pre></p> </li> <li> <p>Check file location: Config must be at <code>/config/settings.yaml</code> inside container</p> </li> <li> <p>Validate YAML syntax: Use a YAML validator</p> </li> </ol>"},{"location":"troubleshooting/#scheduler-issues","title":"Scheduler Issues","text":""},{"location":"troubleshooting/#scheduler-not-running","title":"Scheduler Not Running","text":"<p>Symptoms: Using built-in scheduler but Deleterr only runs once</p> <p>Solutions:</p> <ol> <li> <p>Enable scheduler:    <pre><code>scheduler:\n  enabled: true\n  schedule: \"weekly\"\n</code></pre></p> </li> <li> <p>Check restart policy:    <pre><code>services:\n  deleterr:\n    restart: unless-stopped  # Not \"no\"\n</code></pre></p> </li> <li> <p>View scheduler status:    <pre><code>docker logs deleterr | grep -i schedul\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#ofelia-not-triggering","title":"Ofelia Not Triggering","text":"<p>Symptoms: Using Ofelia but Deleterr never runs</p> <p>Solutions:</p> <ol> <li> <p>Check Ofelia logs:    <pre><code>docker logs scheduler\n</code></pre></p> </li> <li> <p>Verify labels:    <pre><code>labels:\n  ofelia.job-run.deleterr.schedule: \"@weekly\"\n  ofelia.job-run.deleterr.container: \"deleterr\"  # Must match container_name\n</code></pre></p> </li> <li> <p>Ensure Docker socket mounted:    <pre><code>volumes:\n  - /var/run/docker.sock:/var/run/docker.sock:ro\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're still stuck:</p> <ol> <li> <p>Enable debug logging:    <pre><code>environment:\n  LOG_LEVEL: DEBUG\n</code></pre></p> </li> <li> <p>Check GitHub Issues: github.com/rfsbraz/deleterr/issues</p> </li> <li> <p>Create a new issue with:</p> </li> <li>Deleterr version</li> <li>Sanitized config (remove API keys/tokens)</li> <li>Relevant log output</li> <li>Steps to reproduce</li> </ol>"},{"location":"features/leaving-soon/","title":"Leaving Soon","text":"<p>Deleterr's signature feature - a \"death row\" pattern that gives users time to watch content before it's deleted.</p>"},{"location":"features/leaving-soon/#how-it-works","title":"How It Works","text":"<p>Unlike traditional cleanup tools that delete content immediately, Deleterr implements a two-phase deletion process:</p> <pre><code>graph LR\n    A[Media matches&lt;br/&gt;deletion criteria] --&gt; B[First Run:&lt;br/&gt;Tag item]\n    B --&gt; C[User gets&lt;br/&gt;notification]\n    C --&gt; D[Next Run:&lt;br/&gt;Delete item]\n</code></pre> <ol> <li>First run: Items matching deletion criteria are tagged (added to a Plex collection and/or labeled), but NOT deleted</li> <li>Users are notified: Email, Discord, Slack, or Telegram alerts inform users about expiring content</li> <li>Subsequent runs: Previously tagged items are deleted, new candidates are tagged</li> </ol> <p>This gives your users a \"warning period\" to watch content before it's removed.</p>"},{"location":"features/leaving-soon/#configuration","title":"Configuration","text":""},{"location":"features/leaving-soon/#basic-setup","title":"Basic Setup","text":"<p>Add the <code>leaving_soon</code> section to your library configuration:</p> <pre><code>libraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    max_actions_per_run: 20\n    preview_next: 10  # Required for leaving_soon\n    leaving_soon:\n      collection:\n        name: \"Leaving Soon\"\n</code></pre> <p>preview_next Required</p> <p><code>preview_next</code> cannot be set to <code>0</code> when <code>leaving_soon</code> is configured, as the feature needs to tag upcoming deletions.</p>"},{"location":"features/leaving-soon/#collection-settings","title":"Collection Settings","text":"Property Type Default Description <code>name</code> string - Name of the Plex collection to create"},{"location":"features/leaving-soon/#label-settings","title":"Label Settings","text":"<p>You can also add labels to items instead of (or in addition to) collections:</p> <pre><code>leaving_soon:\n  collection:\n    name: \"Leaving Soon\"\n  labels:\n    name: \"leaving-soon\"\n</code></pre> Property Type Default Description <code>name</code> string - Label to apply to items scheduled for deletion"},{"location":"features/leaving-soon/#user-notifications","title":"User Notifications","text":"<p>Configure notifications to alert users about content leaving soon. See Notifications for full setup details.</p> <pre><code>notifications:\n  leaving_soon:\n    subject: \"Content leaving your Plex server soon!\"\n    email:\n      smtp_server: \"smtp.gmail.com\"\n      smtp_port: 587\n      smtp_username: !env SMTP_USERNAME\n      smtp_password: !env SMTP_PASSWORD\n      use_tls: true\n      from_address: \"plex@yourdomain.com\"\n      to_addresses:\n        - \"user1@example.com\"\n        - \"user2@example.com\"\n</code></pre>"},{"location":"features/leaving-soon/#example-workflow","title":"Example Workflow","text":"<p>Here's what happens during a typical Deleterr run with Leaving Soon enabled:</p>"},{"location":"features/leaving-soon/#week-1-first-run","title":"Week 1: First Run","text":"<ol> <li>Deleterr identifies 15 movies matching deletion criteria</li> <li>Movies are added to the \"Leaving Soon\" collection in Plex</li> <li>Users receive email notification listing the 15 movies</li> <li>No deletions occur</li> </ol>"},{"location":"features/leaving-soon/#week-2-second-run","title":"Week 2: Second Run","text":"<ol> <li>Deleterr identifies the same 15 movies are still tagged</li> <li>Those 15 movies are deleted from Radarr</li> <li>New movies matching criteria are tagged for the next cycle</li> <li>Users receive notification about newly tagged items</li> </ol>"},{"location":"features/leaving-soon/#user-watches-a-movie","title":"User Watches a Movie","text":"<p>If a user watches a movie that's in the \"Leaving Soon\" collection:</p> <ol> <li>The watch history is updated in Tautulli</li> <li>On next run, the movie no longer matches the <code>last_watched_threshold</code> criteria</li> <li>The movie is removed from the \"Leaving Soon\" collection</li> <li>The movie survives deletion</li> </ol>"},{"location":"features/leaving-soon/#tips","title":"Tips","text":""},{"location":"features/leaving-soon/#adjust-thresholds-for-your-schedule","title":"Adjust Thresholds for Your Schedule","text":"<p>Match your thresholds to your Deleterr schedule:</p> Schedule Recommended <code>last_watched_threshold</code> Weekly 90+ days Daily 14+ days Monthly 180+ days"},{"location":"features/leaving-soon/#use-plex-home-screen","title":"Use Plex Home Screen","text":"<p>Pin the \"Leaving Soon\" collection to your Plex home screen so users see it prominently:</p> <ol> <li>In Plex, navigate to the \"Leaving Soon\" collection</li> <li>Click the three dots menu</li> <li>Select \"Add to Home\"</li> </ol>"},{"location":"features/leaving-soon/#combine-with-disk-thresholds","title":"Combine with Disk Thresholds","text":"<p>Leaving Soon works well with disk thresholds - items are only tagged when disk space is low:</p> <pre><code>libraries:\n  - name: \"Movies\"\n    radarr: \"Radarr\"\n    action_mode: \"delete\"\n    max_actions_per_run: 20\n    preview_next: 10\n    disk_size_threshold:\n      - path: \"/data/media\"\n        threshold: 500GB\n    leaving_soon:\n      collection:\n        name: \"Leaving Soon\"\n</code></pre>"},{"location":"features/leaving-soon/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/leaving-soon/#collection-not-appearing-in-plex","title":"Collection Not Appearing in Plex","text":"<ol> <li>Verify Plex URL and token are correct in your config</li> <li>Check Deleterr logs for Plex API errors</li> <li>Ensure <code>preview_next</code> is greater than 0</li> <li>Run with <code>dry_run: false</code> - collections are only created in non-dry-run mode</li> </ol>"},{"location":"features/leaving-soon/#items-not-being-deleted","title":"Items Not Being Deleted","text":"<ol> <li>Confirm items were tagged in a previous run</li> <li>Check that items still match deletion criteria</li> <li>Verify <code>action_mode: \"delete\"</code> is set</li> <li>Look for exclusion rules that might be protecting the content</li> </ol>"},{"location":"features/leaving-soon/#notifications-not-sending","title":"Notifications Not Sending","text":"<p>See Notifications Troubleshooting for notification-specific issues.</p>"},{"location":"features/notifications/","title":"Notifications","text":"<p>Deleterr supports multiple notification providers to keep you and your users informed about media cleanup activities.</p>"},{"location":"features/notifications/#two-types-of-notifications","title":"Two Types of Notifications","text":"<p>Deleterr sends two distinct types of notifications:</p> Type Purpose Audience Run Summary What was deleted this run Admins Leaving Soon What's scheduled for deletion Users"},{"location":"features/notifications/#quick-start","title":"Quick Start","text":""},{"location":"features/notifications/#admin-notifications-run-summary","title":"Admin Notifications (Run Summary)","text":"<p>Receive alerts when Deleterr deletes media:</p> DiscordSlackTelegramEmail <pre><code>notifications:\n  enabled: true\n  discord:\n    webhook_url: \"https://discord.com/api/webhooks/...\"\n</code></pre> <pre><code>notifications:\n  enabled: true\n  slack:\n    webhook_url: \"https://hooks.slack.com/services/...\"\n</code></pre> <pre><code>notifications:\n  enabled: true\n  telegram:\n    bot_token: \"123456789:ABCdefGHI...\"\n    chat_id: \"-1001234567890\"\n</code></pre> <pre><code>notifications:\n  enabled: true\n  email:\n    smtp_server: \"smtp.gmail.com\"\n    smtp_port: 587\n    smtp_username: !env SMTP_USERNAME\n    smtp_password: !env SMTP_PASSWORD\n    use_tls: true\n    from_address: \"deleterr@yourdomain.com\"\n    to_addresses:\n      - \"admin@yourdomain.com\"\n</code></pre>"},{"location":"features/notifications/#user-notifications-leaving-soon","title":"User Notifications (Leaving Soon)","text":"<p>Alert users about content they should watch before it's deleted:</p> <pre><code>notifications:\n  leaving_soon:\n    subject: \"Content leaving your Plex server soon!\"\n    email:\n      smtp_server: \"smtp.gmail.com\"\n      smtp_port: 587\n      smtp_username: !env SMTP_USERNAME\n      smtp_password: !env SMTP_PASSWORD\n      use_tls: true\n      from_address: \"plex@yourdomain.com\"\n      to_addresses:\n        - \"family@example.com\"\n        - \"friends@example.com\"\n</code></pre> <p>Separate Configuration</p> <p>Leaving Soon notifications are configured separately from run summary notifications. They do NOT inherit provider settings from the parent config.</p>"},{"location":"features/notifications/#provider-configuration","title":"Provider Configuration","text":""},{"location":"features/notifications/#discord","title":"Discord","text":"<p>Send rich embeds to Discord channels via webhooks.</p> <pre><code>notifications:\n  discord:\n    webhook_url: \"https://discord.com/api/webhooks/...\"\n    username: \"Deleterr\"\n    avatar_url: \"https://example.com/avatar.png\"\n</code></pre> Property Required Description <code>webhook_url</code> Yes Discord webhook URL <code>username</code> No Bot username override <code>avatar_url</code> No Bot avatar URL <p>Creating a webhook:</p> <ol> <li>Open Discord channel settings</li> <li>Go to Integrations &gt; Webhooks</li> <li>Click \"New Webhook\"</li> <li>Copy the webhook URL</li> </ol>"},{"location":"features/notifications/#slack","title":"Slack","text":"<p>Send messages to Slack via Incoming Webhooks.</p> <pre><code>notifications:\n  slack:\n    webhook_url: \"https://hooks.slack.com/services/...\"\n    channel: \"#media-cleanup\"\n    username: \"Deleterr\"\n    icon_emoji: \":wastebasket:\"\n</code></pre> Property Required Description <code>webhook_url</code> Yes Slack webhook URL <code>channel</code> No Override target channel <code>username</code> No Bot username override <code>icon_emoji</code> No Bot icon emoji"},{"location":"features/notifications/#telegram","title":"Telegram","text":"<p>Send messages via the Telegram Bot API.</p> <pre><code>notifications:\n  telegram:\n    bot_token: \"123456789:ABCdefGHIjklMNOpqrsTUVwxyz\"\n    chat_id: \"-1001234567890\"\n    parse_mode: \"MarkdownV2\"\n</code></pre> Property Required Description <code>bot_token</code> Yes Bot token from @BotFather <code>chat_id</code> Yes Target chat/group/channel ID <code>parse_mode</code> No Message format (default: MarkdownV2) <p>Getting your chat ID:</p> <ol> <li>Add your bot to the group/channel</li> <li>Send a message to the group</li> <li>Visit <code>https://api.telegram.org/bot&lt;TOKEN&gt;/getUpdates</code></li> <li>Find the <code>chat.id</code> value</li> </ol>"},{"location":"features/notifications/#email","title":"Email","text":"<p>Send HTML emails via SMTP.</p> <pre><code>notifications:\n  email:\n    smtp_server: \"smtp.gmail.com\"\n    smtp_port: 587\n    smtp_username: !env SMTP_USERNAME\n    smtp_password: !env SMTP_PASSWORD\n    use_tls: true\n    from_address: \"deleterr@yourdomain.com\"\n    to_addresses:\n      - \"admin@yourdomain.com\"\n    subject: \"Deleterr Run Complete\"\n</code></pre> Property Required Default Description <code>smtp_server</code> Yes - SMTP server hostname <code>smtp_port</code> Yes - SMTP port (587 for TLS, 465 for SSL) <code>smtp_username</code> Yes - SMTP authentication username <code>smtp_password</code> Yes - SMTP authentication password <code>use_tls</code> No <code>true</code> Enable STARTTLS <code>from_address</code> Yes - Sender email address <code>to_addresses</code> Yes - List of recipient addresses <code>subject</code> No - Email subject line"},{"location":"features/notifications/#gmail-setup","title":"Gmail Setup","text":"<ol> <li>Enable 2-Step Verification</li> <li>Create an App Password</li> <li>Use the app password as <code>smtp_password</code></li> </ol>"},{"location":"features/notifications/#webhook-generic","title":"Webhook (Generic)","text":"<p>Send JSON payloads to any HTTP endpoint.</p> <pre><code>notifications:\n  webhook:\n    url: \"https://example.com/webhook\"\n    method: \"POST\"\n    headers:\n      Authorization: \"Bearer your-token\"\n      Content-Type: \"application/json\"\n    timeout: 30\n</code></pre> Property Required Default Description <code>url</code> Yes - Webhook endpoint URL <code>method</code> No <code>POST</code> HTTP method <code>headers</code> No - Custom HTTP headers <code>timeout</code> No <code>30</code> Request timeout in seconds"},{"location":"features/notifications/#general-settings","title":"General Settings","text":"<pre><code>notifications:\n  enabled: true\n  notify_on_dry_run: true\n  include_preview: true\n  min_deletions_to_notify: 1\n</code></pre> Property Default Description <code>enabled</code> <code>true</code> Enable/disable all notifications <code>notify_on_dry_run</code> <code>true</code> Send notifications during dry runs <code>include_preview</code> <code>true</code> Include preview of items in notification <code>min_deletions_to_notify</code> <code>1</code> Minimum deletions to trigger notification"},{"location":"features/notifications/#leaving-soon-templates","title":"Leaving Soon Templates","text":"<p>The default leaving soon template includes:</p> <ul> <li>Warning explaining items will be removed</li> <li>Tip explaining how watching content keeps it</li> <li>Grouped sections for Movies and TV Shows</li> <li>Links to Plex (if configured)</li> <li>Links to Overseerr for re-requesting (if configured)</li> </ul>"},{"location":"features/notifications/#custom-templates","title":"Custom Templates","text":"<p>Use your own HTML template:</p> <pre><code>notifications:\n  leaving_soon:\n    template: \"/config/my-template.html\"\n    subject: \"Watch Before It's Gone!\"\n    email:\n      # ... email settings\n</code></pre> <p>Template variables available:</p> Variable Description <code>{{ movies }}</code> List of movie items <code>{{ shows }}</code> List of TV show items <code>{{ plex_url }}</code> Plex server URL (if configured) <code>{{ overseerr_url }}</code> Overseerr URL (if configured)"},{"location":"features/notifications/#testing-notifications","title":"Testing Notifications","text":"<p>Test your configuration before relying on it:</p> <pre><code># Test leaving_soon notifications (default)\ndocker run --rm -v ./config:/config deleterr \\\n  python -m scripts.test_notifications\n\n# Test run summary notifications\ndocker run --rm -v ./config:/config deleterr \\\n  python -m scripts.test_notifications --type run_summary\n\n# Test specific provider only\ndocker run --rm -v ./config:/config deleterr \\\n  python -m scripts.test_notifications --provider email\n\n# Preview without sending (dry run)\ndocker run --rm -v ./config:/config deleterr \\\n  python -m scripts.test_notifications --dry-run\n\n# Show configuration status\ndocker run --rm -v ./config:/config deleterr \\\n  python -m scripts.test_notifications --status\n</code></pre>"},{"location":"features/notifications/#multiple-providers","title":"Multiple Providers","text":"<p>Use multiple providers simultaneously:</p> <pre><code>notifications:\n  enabled: true\n  # Admin gets Discord + Email\n  discord:\n    webhook_url: !env DISCORD_ADMIN_WEBHOOK\n  email:\n    smtp_server: \"smtp.gmail.com\"\n    # ... email settings\n    to_addresses:\n      - \"admin@example.com\"\n\n  # Users get separate notifications\n  leaving_soon:\n    discord:\n      webhook_url: !env DISCORD_USERS_WEBHOOK\n    email:\n      smtp_server: \"smtp.gmail.com\"\n      # ... email settings\n      to_addresses:\n        - \"users@example.com\"\n</code></pre>"},{"location":"features/notifications/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/notifications/#notifications-not-sending","title":"Notifications Not Sending","text":"<ol> <li>Check enabled flag: Ensure <code>notifications.enabled: true</code></li> <li>Verify credentials: Test API keys/tokens manually</li> <li>Check logs: Look for notification errors in Deleterr logs</li> <li>Test configuration: Run the test script</li> </ol>"},{"location":"features/notifications/#discord-webhook-errors","title":"Discord Webhook Errors","text":"<ul> <li>401 Unauthorized: Webhook URL is invalid or deleted</li> <li>400 Bad Request: Message format issue (check logs)</li> <li>429 Rate Limited: Too many requests, Deleterr will retry</li> </ul>"},{"location":"features/notifications/#email-not-arriving","title":"Email Not Arriving","text":"<ol> <li>Check spam/junk folders</li> <li>Verify SMTP credentials</li> <li>For Gmail, ensure App Password is used (not account password)</li> <li>Check <code>use_tls</code> matches your SMTP port (587=TLS, 465=SSL)</li> </ol>"},{"location":"features/notifications/#telegram-bot-not-responding","title":"Telegram Bot Not Responding","text":"<ol> <li>Verify bot token with @BotFather</li> <li>Ensure bot is added to the target chat</li> <li>For groups, bot must be admin or have message permissions</li> <li>Check chat_id is correct (use getUpdates API)</li> </ol>"}]}